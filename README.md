# Mario-AI  

This project uses the simulated annealing algorithm for procedural content generation of Mario levels. The function used
to evaluate the quality of a generated level is based on a "funness" metric that the player assigns. A nonlinear
regression model provided by the **scikit-learn** library then finds the function that best approximates the player's
rating pattern. In particular, the nonlinear regression model uses a [support vector machine] (http://scikit-learn.org/stable/modules/svm.html#regression)
with a radial basis function as its kernel. Hence, the game incorporates AI as a key element in the gaming experience,
as the generated levels will be directly tailored to a player's unique preferences.

In this project, the map generation approach I followed is a hybrid one that combines constructionist and randomized
optimization techniques. That is, the constructionist approach first initializes a randomly generated map that is pieced
together using pre-made building blocks. The simulated annealing algorithm is then used to find the optimal
configuration of components based on a user-refined evaluation function.

Player preference modeling in this project is done using a human-in-the-loop approach. At the end of every
procedurally-generated level, the player assigns a "fun" rating (0="dislike" or 1="like"). These ratings are then input
as training data to the nonlinear regression model, which is used to refine the parameters of the evaluation function.

## How to Run the Project

1. Clone the repository https://github.gatech.edu/sdai30/Mario-AI.git.

2. Install the required dependencies. For Java, install **ant**. For the game to build the player "funness" model,
install **Python** and the Python libraries **numpy**, **scipy**, and **scikit-learn**.

3. Type **ant play** into the command line to play a customized PCG level.

4. After after every level, enter a "funness" rating (0="dislike" or 1="like") when prompted.

5. Play more levels until an accurate regression model of "funness" can be approximated.

By default, the file "ratings.arff" contains sample ratings that were obtained after playing 50+ randomly generated
levels. The file "svr_model.pkl" stores the support vector regression model that is used to predict the "funness" of a
level generated by the simulated annealing algorithm. To remove these pre-loaded training examples and the corresponding
regression model, type **ant clean-super**. Bear in mind that the game requires a minimum of 50 ratings before a
regression model can be built\!

## Commands
**ant compile**: Compiles src/ directory files.

**ant play**: Plays a custom level that uses procedural content generation.

**ant play-default**: Plays a random level that is built using pre-authored chunks.

**ant clean**: Removes the .class files contained in the bin/ directory.

**ant clean-super**: Performs a regular clean and then removes the ratings.arff and svr_model.pkl files.

## Sources
1. C. Pedersen, J. Togelius, and G. N. Yannakakis, “Modeling player experience in super mario bros,” in Computational Intelligence and Games, 2009.
CIG 2009. IEEE Symposium on, 2009, pp. 132–139.

2. S. Rabin, Game AI Pro 2: Collected Wisdom of Game AI Professionals. Boca Raton, Florida: CRC Press.

3. S. J. Russell, P. Norvig, and E. Davis, Artificial Intelligence: A Modern Approach, 3rd ed.
Upper Saddle River: Prentice Hall, 2010.

4. http://scikit-learn.org/stable/modules/svm.html